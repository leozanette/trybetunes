(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},32:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(22),i=n.n(c),s=(n(29),n(2)),o=n(3),u=n(5),l=n(4),j=n(13),d=n(7),b=n(6),h=n.n(b),p=n(9),O=n(15),f=n(18),m="user",v=function(t){return localStorage.setItem(m,JSON.stringify(t))},x=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},g=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(m));null===e&&(e={}),x(e)(t)}))},k=function(t){return new Promise((function(e){v(Object(f.a)(Object(f.a)({},{name:"",email:"",image:"",description:""}),t)),x("OK")(e)}))},y=n(0),w=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("p",{children:"Carregando..."})}}]),n}(r.a.Component),C=w,S=(n(32),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onInputChange=function(e){t.setState(Object(O.a)({},e.target.name,e.target.value))},t.clickLogin=function(e){var n=t.state.login;e.preventDefault(),t.setState({loading:!1},Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({name:n});case 2:t.setState({loading:!0,redirect:!0});case 3:case"end":return e.stop()}}),e)}))))},t.state={login:"",loading:!0,redirect:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.login,n=t.loading;return t.redirect?Object(y.jsx)(d.a,{to:"/search"}):Object(y.jsx)("div",{"data-testid":"page-login",children:n?Object(y.jsxs)("form",{children:[Object(y.jsxs)("label",{htmlFor:"login",children:["Nome completo:",Object(y.jsx)("input",{type:"text",name:"login","data-testid":"login-name-input",value:e,onChange:this.onInputChange,placeholder:"digite seu nome..."})]}),Object(y.jsx)("button",{disabled:e.length<3,type:"submit","data-testid":"login-submit-button",onClick:this.clickLogin,children:"Entrar"})]}):Object(y.jsx)(C,{})})}}]),n}(r.a.Component)),I=n(17),N=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={usuario:{},loading:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.pegarUsuario()}},{key:"pegarUsuario",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:e=t.sent,console.log(e),this.setState({usuario:e,loading:!0});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.usuario,n=t.loading;return Object(y.jsxs)("header",{"data-testid":"header-component",children:[Object(y.jsx)("h4",{"data-testid":"header-user-name",children:n?e.name:Object(y.jsx)(C,{})}),Object(y.jsxs)("nav",{children:[Object(y.jsx)(j.b,{to:"/search","data-testid":"link-to-search",children:"Pesquisar"}),Object(y.jsx)(j.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(y.jsx)(j.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]})]})}}]),n}(r.a.Component),P=N,U=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a,r,c,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,i=c.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=U,D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onInputChange=function(e){t.setState(Object(O.a)({},e.target.name,e.target.value))},t.onButtonClick=function(e){e.preventDefault();var n=t.state.search;t.setState({artista:n,clicou:!0},Object(p.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n);case 2:a=e.sent,t.setState({search:"",resultado:Object(I.a)(a)});case 4:case"end":return e.stop()}}),e)}))))},t.state={search:"",artista:"",resultado:[],clicou:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.search,n=t.artista,a=t.clicou,r=t.resultado;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(P,{}),Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{placeholder:"Nome do Artista","data-testid":"search-artist-input",type:"text",name:"search",value:e,onChange:this.onInputChange}),Object(y.jsx)("button",{type:"submit","data-testid":"search-artist-button",disabled:e.length<2,onClick:this.onButtonClick,children:"Procurar"})]}),Object(y.jsx)("div",{children:a&&Object(y.jsx)("div",{children:0===r.length?Object(y.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"}):Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"Resultado de \xe1lbuns de: ".concat(n)}),Object(y.jsx)("section",{children:r.map((function(t,e){return Object(y.jsxs)("div",{children:[Object(y.jsx)(j.b,{to:"/album/".concat(t.collectionId),"data-testid":"link-to-album-".concat(t.collectionId),album:t.collectionId,children:Object(y.jsx)("img",{src:t.artworkUrl100,alt:t.collectionName})}),Object(y.jsx)("p",{children:t.collectionName}),Object(y.jsx)("p",{children:t.artistName})]},e)}))})]})})})]})}}]),n}(r.a.Component),M=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=M,T="favorite_songs";JSON.parse(localStorage.getItem(T))||localStorage.setItem(T,JSON.stringify([]));var A=function(){return JSON.parse(localStorage.getItem(T))},B=function(t){return localStorage.setItem(T,JSON.stringify(t))},E=function(t){return function(e){setTimeout((function(){e(t)}),500)}},K=function(t){return new Promise((function(e){if(t){var n=A();B([].concat(Object(I.a)(n),[t]))}E("OK")(e)}))},L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).favoriteSong=function(){var e=t.props.object;t.setState({loading:!1},Object(p.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K(e);case 2:t.setState((function(){return{loading:!0,checked:!0}}));case 3:case"end":return n.stop()}}),n)}))))},t.pegarFavoritas=Object(p.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.trackId,e.next=3,new Promise((function(t){var e=A();E(e)(t)}));case 3:a=e.sent,t.setState({checked:a.some((function(t){return t.trackId===n}))});case 5:case"end":return e.stop()}}),e)}))),t.state={loading:!0,checked:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.pegarFavoritas()}},{key:"render",value:function(){var t=this.props,e=t.trackName,n=t.previewUrl,a=t.trackId,r=this.state,c=r.loading,i=r.checked;return Object(y.jsx)("div",{children:c?Object(y.jsxs)("li",{children:[Object(y.jsx)("p",{children:e}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:"".concat(n),controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," "," ",Object(y.jsx)("code",{children:"audio"}),"."]}),Object(y.jsx)("input",{"data-testid":"checkbox-music-".concat(a),type:"checkbox",name:e,checked:i,onChange:this.favoriteSong})]}):Object(y.jsx)(C,{})})}}]),n}(r.a.Component),R=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).pegarMusicas=Object(p.a)(h.a.mark((function e(){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,F(n);case 3:a=e.sent,r=a.filter((function(t){return"song"===t.kind})),t.setState({album:a[0],songs:r});case 6:case"end":return e.stop()}}),e)}))),t.state={album:{},songs:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.pegarMusicas()}},{key:"render",value:function(){var t=this.state.album,e=t.artistName,n=t.collectionName,a=this.state.songs;return Object(y.jsxs)("div",{"data-testid":"page-album",children:[Object(y.jsx)(P,{}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{"data-testid":"album-name",children:n}),Object(y.jsx)("h5",{"data-testid":"artist-name",children:e}),Object(y.jsx)("ul",{children:a.map((function(t){return Object(y.jsx)(L,{trackId:t.trackId,trackName:t.trackName,previewUrl:t.previewUrl,object:t},t.trackId)}))})]})]})}}]),n}(r.a.Component),q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{"data-testid":"page-favorites",children:[Object(y.jsx)(P,{}),Object(y.jsx)("h1",{children:"Favorites"})]})}}]),n}(r.a.Component),_=q,z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{"data-testid":"page-profile",children:[Object(y.jsx)(P,{}),Object(y.jsx)("h1",{children:"Profile"})]})}}]),n}(r.a.Component),G=z,H=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(y.jsx)(P,{}),Object(y.jsx)("h1",{children:"Profile Edit"})]})}}]),n}(r.a.Component),Q=H,V=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-not-found",children:Object(y.jsx)("h1",{children:"notfind"})})}}]),n}(r.a.Component),W=V,X=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("main",{className:"content",children:Object(y.jsxs)(d.d,{children:[Object(y.jsx)(d.b,{path:"/",exact:!0,component:S}),Object(y.jsx)(d.b,{path:"/search",component:D}),Object(y.jsx)(d.b,{path:"/album/:id",component:R}),Object(y.jsx)(d.b,{path:"/profile/edit",component:Q}),Object(y.jsx)(d.b,{path:"/profile",component:G}),Object(y.jsx)(d.b,{path:"/favorites",component:_}),Object(y.jsx)(d.b,{path:"*",component:W})]})})}}]),n}(r.a.Component),Y=X,Z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("header",{children:Object(y.jsx)("h1",{children:"TrybeTunes"})}),Object(y.jsx)(Y,{})]})}}]),n}(r.a.Component),$=Z;i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)($,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.6eff7092.chunk.js.map